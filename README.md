# üè¶ –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π API –Ω–∞ Go

Backend-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏, –∫—Ä–µ–¥–∏—Ç–∞–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

---

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ email –∏ username
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –≤—ã–¥–∞—á–µ–π JWT-—Ç–æ–∫–µ–Ω–∞ —Å—Ä–æ–∫–æ–º –Ω–∞ 24 —á–∞—Å–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤
  - –ü–µ—Ä–µ–≤–æ–¥—ã —Å—Ä–µ–¥—Å—Ç–≤ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

### –ö–∞—Ä—Ç—ã
- –í—ã–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö:
  - –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –õ—É–Ω–∞
  - –ù–æ–º–µ—Ä —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (PGP)
  - CVV —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ bcrypt-—Ö–µ—à–∞
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã –≤–ª–∞–¥–µ–ª—å—Ü–µ–º

### –ö—Ä–µ–¥–∏—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤ —Å –∞–Ω–Ω—É–∏—Ç–µ—Ç–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- –®—Ç—Ä–∞—Ñ—ã –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É –ø–ª–∞—Ç–µ–∂–∞ (+10% –∫ —Å—É–º–º–µ)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ü–∞—Ä–æ–ª–∏**: —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º bcrypt (cost 12+)
- **JWT**: –ø–æ–¥–ø–∏—Å—å HMAC-SHA256, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 24 —á–∞—Å–∞
- **–î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç**:
  - –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã: PGP-—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
  - CVV: bcrypt-—Ö–µ—à
  - –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å: HMAC-SHA256
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –ø–æ userID

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ê–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ –º–µ—Å—è—Ü
- –û—Ü–µ–Ω–∫–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
- –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ —Å—Ä–æ–∫ –¥–æ 365 –¥–Ω–µ–π

- ### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- **–¶–ë –†–§**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SOAP API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤–æ–π —Å—Ç–∞–≤–∫–∏
  - URL: `https://www.cbr.ru/DailyInfoWebServ/DailyInfo.asmx`
  - –ü–∞—Ä—Å–∏–Ω–≥ XML-–æ—Ç–≤–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º etree
- **SMTP**: Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –∏ –ø—Ä–æ—Å—Ä–æ—á–∫–∞—Ö –ø–ª–∞—Ç–µ–∂–µ–π

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: Go 1.23+
- **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: `github.com/gorilla/mux`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 17
- **–î—Ä–∞–π–≤–µ—Ä –ë–î**: `github.com/lib/pq`
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT (`github.com/golang-jwt/jwt/v5`)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: `github.com/sirupsen/logrus`
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ/—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: bcrypt, HMAC-SHA256, PGP
- **Email**: `gopkg.in/gomail.v2`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ XML**: `github.com/beevik/etree`
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `time.Ticker`

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
    - Go 1.23+
    - PostgreSQL 17+
    
### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/vanhellthing93/sf.mephi.go_homework
```

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª pgp –∫–ª—é—á–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ ./pgp.key. 
–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å–æ–º https://onlinepgp.com/

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª:
``` env
## –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–¥
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=bank_service
SSL_MODE=disable

## –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ smtp
SMTP_HOST=smtp.example.com
SMTP_PORT=465
SMTP_USERNAME=user@example.com
SMTP_PASSWORD=email_password
SMTP_FROM=user@example.com

##–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—Ç–∞–≤–∫–∏ —Ü–± –¥–ª—è –∫—Ä–µ–¥–∏—Ç–æ–≤
CB_RATE_INCREMENT=2.5

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
HMAC_SECRET=HMAC_SECRET
JWT_SECRET=your_strong_jwt_secret

## –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞ –∫–ª—é—á–∞ pgp. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥—Ä—É–≥–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –ø—É—Ç—å, —Ç–æ –∑–¥–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
PGP_PRIVATE_KEY=./pgp.key 

```



### 3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
go mod download
go run main.go
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
go_homework/
‚îú‚îÄ‚îÄ configs/       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/  # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/    # –°—É—â–Ω–æ—Å—Ç–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ repos/     # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (—Ä–∞–±–æ—Ç–∞ —Å –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ services/  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils/     # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ migrations/    # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ migrations/    # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ migrations/    # SQL-–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .env.example   # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥–∞
‚îî‚îÄ‚îÄ README.md                 # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```

---

## üîë –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω>
```
---

## üìñ –ü—Ä–∏–º–µ—Ä—ã API-–∑–∞–ø—Ä–æ—Å–æ–≤

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X POST http://localhost:8080/register \
  -H "Content-Type: application/json" \
  -d '{"username":"user1", "email":"user@example.com", "password":"qwerty123"}'
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞)

```bash
curl -X POST http://localhost:8080/login \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com", "password":"qwerty123"}'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–∞  (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

```bash
curl -X POST http://localhost:8080/accounts \
  -H "Authorization: Bearer <—Ç–æ–∫–µ–Ω>" \
  -d '{"currency":"RUB"}'
```

### –ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤  (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

```bash
curl -X POST http://localhost:8080/transfers \
  -H "Authorization: Bearer <—Ç–æ–∫–µ–Ω>" \
  -d '{"from_account_id":1, "to_account_id":2, "amount":100.50}'
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Postman** –∏–ª–∏ **curl** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–±–æ—Ç–∞—é—Ç:

- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ–º—Ä–∞—Ü–∏–∏ –æ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–∞—Ö
- —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ–º—Ä–∞—Ü–∏–∏ –æ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –∫–∞—Ä—Ç–∞—Ö
- –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
- –ø–æ–ª—É—á–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∏—Ö
- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫—Ä–µ–¥–∏—Ç—É
- –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## üñã –ê–≤—Ç–æ—Ä

**–ö–æ—Å–æ–≤—Å–∫–∏–π –ò–≤–∞–Ω**\
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ú–ò–§–ò\
GitHub: [github.com/vanhellthing93](https://github.com/vanhellthing93)